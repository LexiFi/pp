<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Pp (pp.Pp)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">pp</a> &#x00BB; Pp</nav><h1>Module <code>Pp</code></h1><p>Pretty-printing.</p><nav class="toc"><ul><li><a href="#basic-combinators">Basic combinators</a></li><li><a href="#break-hints">Break hints</a></li><li><a href="#boxes">Boxes</a></li><li><a href="#tags">Tags</a></li><li><a href="#convenience-functions">Convenience functions</a></li><li><a href="#operators">Operators</a></li><li><a href="#rendering">Rendering</a></li><li><a href="#injection">Injection</a></li><li><a href="#ast">Ast</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>+'tag t</span></code></dt><dd><p>A document that is not yet rendered. The argument is the type of tags in the document. For instance tags might be used for styles.</p></dd></dl><section><header><h2 id="basic-combinators"><a href="#basic-combinators" class="anchor"></a>Basic combinators</h2></header><dl><dt class="spec value" id="val-nop"><a href="#val-nop" class="anchor"></a><code><span class="keyword">val</span> nop : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>A pretty printer that prints nothing</p></dd></dl><dl><dt class="spec value" id="val-seq"><a href="#val-seq" class="anchor"></a><code><span class="keyword">val</span> seq : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>seq x y</code> prints <code>x</code> and then <code>y</code></p></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val</span> concat : <span>?&#8288;sep:<span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>concat ?sep l</code> prints elements in <code>l</code> separated by <code>sep</code>. <code>sep</code> defaults to <code>nop</code>.</p></dd></dl><dl><dt class="spec value" id="val-concat_map"><a href="#val-concat_map" class="anchor"></a><code><span class="keyword">val</span> concat_map : <span>?&#8288;sep:<span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Convenience function for <code>List.map</code> followed by <code>concat</code></p></dd></dl><dl><dt class="spec value" id="val-concat_mapi"><a href="#val-concat_mapi" class="anchor"></a><code><span class="keyword">val</span> concat_mapi : <span>?&#8288;sep:<span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span> <span>&#45;&gt;</span> <span>f:<span>(int <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-verbatim"><a href="#val-verbatim" class="anchor"></a><code><span class="keyword">val</span> verbatim : string <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>An indivisible block of text</p></dd></dl><dl><dt class="spec value" id="val-char"><a href="#val-char" class="anchor"></a><code><span class="keyword">val</span> char : char <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>A single character</p></dd></dl><dl><dt class="spec value" id="val-text"><a href="#val-text" class="anchor"></a><code><span class="keyword">val</span> text : string <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Print a bunch of text. The line may be broken at any spaces in the text.</p></dd></dl><dl><dt class="spec value" id="val-textf"><a href="#val-textf" class="anchor"></a><code><span class="keyword">val</span> textf : <span><span>(<span class="type-var">'a</span>, unit, string, <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span>)</span> Stdlib.format4</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Same as <code>text</code> but take a format string as argument.</p></dd></dl></section><section><header><h2 id="break-hints"><a href="#break-hints" class="anchor"></a>Break hints</h2></header><dl><dt class="spec value" id="val-space"><a href="#val-space" class="anchor"></a><code><span class="keyword">val</span> space : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>space</code> instructs the pretty-printing algorithm that the line may be broken at this point. If the algorithm decides not to break the line, a single space will be printed instead.</p><p>So for instance <code>verbatim &quot;x&quot; ++ space ++ verbatim &quot;y&quot;</code> might produce &quot;x y&quot; or &quot;x\n&lt;indentation&gt;y&quot;.</p></dd></dl><dl><dt class="spec value" id="val-cut"><a href="#val-cut" class="anchor"></a><code><span class="keyword">val</span> cut : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>cut</code> instructs the pretty-printing algorithm that the line may be broken at this point. If the algorithm decides not to break the line, nothing is printed instead.</p><p>So for instance <code>verbatim &quot;x&quot; ++ space ++ verbatim &quot;y&quot;</code> might produce &quot;xy&quot; or &quot;x\n&lt;indentation&gt;y&quot;.</p></dd></dl><dl><dt class="spec value" id="val-break"><a href="#val-break" class="anchor"></a><code><span class="keyword">val</span> break : <span>nspaces:int</span> <span>&#45;&gt;</span> <span>shift:int</span> <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>break</code> is a generalisation of <code>space</code> and <code>cut</code>. It also instructs the pretty-printing algorithm that the line may be broken at this point. If it ends up being broken, <code>shift</code> will be added to the indentation level, otherwise <code>nspaces</code> spaces will be printed. <code>shift</code> can be negative, in which case the indentation will be reduced.</p></dd></dl><dl><dt class="spec value" id="val-custom_break"><a href="#val-custom_break" class="anchor"></a><code><span class="keyword">val</span> custom_break : <span>fits:<span>(string * int * string)</span></span> <span>&#45;&gt;</span> <span>breaks:<span>(string * int * string)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>custom_break ~fits:(a, b, c) ~breaks:(x, y, z)</code> is a generalisation of <code>break</code>. It also instructs the pretty-printing algorithm that the line may be broken at this point. If it ends up being broken, <code>x</code> is printed, the line breaks, <code>y</code> will be added to the indentation level and <code>z</code> is printed, otherwise <code>a</code> will be printed, <code>b</code> spaces are printed and then <code>c</code> is printed. The indentation <code>y</code> can be negative, in which case the indentation will be reduced.</p></dd></dl><dl><dt class="spec value" id="val-newline"><a href="#val-newline" class="anchor"></a><code><span class="keyword">val</span> newline : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Force a newline to be printed</p></dd></dl></section><section><header><h2 id="boxes"><a href="#boxes" class="anchor"></a>Boxes</h2></header><aside><p>Boxes are the basic components to control the layout of the text. Break hints such as <code>space</code> and <code>cut</code> may cause the line to be broken, depending on the splitting rules. Whenever a line is split, the rest of the material printed in the box is indented with <code>indent</code>.</p><p>You can think of a box with indentation as something with this shape:</p><pre>       ######################### &lt;- first line
       &lt;indent&gt;#################
       &lt;indent&gt;#################
       &lt;indent&gt;#################
       &lt;indent&gt;#################</pre><p>And the top left corner of this shape is anchored where the box was declared. So for instance, the following document:</p><pre><code class="ml">Pp.verbatim &quot;.....&quot; ++ Pp.box ~indent:2 (Pp.text &quot;some long ... text&quot;) </code></pre><p>would produce:</p><pre>       .....some long ...
              text</pre></aside><dl><dt class="spec value" id="val-box"><a href="#val-box" class="anchor"></a><code><span class="keyword">val</span> box : <span>?&#8288;indent:int</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Try to put as much as possible on each line. Additionally, a break hint always break the line if the breaking would reduce the indentation level inside the box (<code>break</code> with negative <code>shift</code> value).</p></dd></dl><dl><dt class="spec value" id="val-vbox"><a href="#val-vbox" class="anchor"></a><code><span class="keyword">val</span> vbox : <span>?&#8288;indent:int</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Always break the line when encountering a break hint.</p></dd></dl><dl><dt class="spec value" id="val-hbox"><a href="#val-hbox" class="anchor"></a><code><span class="keyword">val</span> hbox : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Print everything on one line, no matter what</p></dd></dl><dl><dt class="spec value" id="val-hvbox"><a href="#val-hvbox" class="anchor"></a><code><span class="keyword">val</span> hvbox : <span>?&#8288;indent:int</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>If possible, print everything on one line. Otherwise, behave as a <code>vbox</code></p></dd></dl><dl><dt class="spec value" id="val-hovbox"><a href="#val-hovbox" class="anchor"></a><code><span class="keyword">val</span> hovbox : <span>?&#8288;indent:int</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Try to put as much as possible on each line. Basically the same as <code>box</code> but without the rule about breaks with negative <code>shift</code> value.</p></dd></dl></section><section><header><h2 id="tags"><a href="#tags" class="anchor"></a>Tags</h2></header><aside><p>Tags are arbitrary pieces of information attached to a document. They can be used to add styles to pretty-printed text, for instance to print to the terminal with colors.</p></aside><dl><dt class="spec value" id="val-tag"><a href="#val-tag" class="anchor"></a><code><span class="keyword">val</span> tag : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>tag x t</code> Tag the material printed by <code>t</code> with <code>x</code></p></dd></dl><dl><dt class="spec value" id="val-map_tags"><a href="#val-map_tags" class="anchor"></a><code><span class="keyword">val</span> map_tags : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Convert tags in a documents</p></dd></dl><dl><dt class="spec value" id="val-filter_map_tags"><a href="#val-filter_map_tags" class="anchor"></a><code><span class="keyword">val</span> filter_map_tags : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt></dl></section><section><header><h2 id="convenience-functions"><a href="#convenience-functions" class="anchor"></a>Convenience functions</h2></header><dl><dt class="spec value" id="val-enumerate"><a href="#val-enumerate" class="anchor"></a><code><span class="keyword">val</span> enumerate : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>enumerate l ~f</code> produces an enumeration of the form:</p><pre>      - item1
      - item2
      - item3
      ...</pre></dd></dl><dl><dt class="spec value" id="val-chain"><a href="#val-chain" class="anchor"></a><code><span class="keyword">val</span> chain : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>chain l ~f</code> is used to print a succession of items that follow each other. It produces an output of this form:</p><pre>         item1
      -&gt; item2
      -&gt; item3
      ...</pre></dd></dl></section><section><header><h2 id="operators"><a href="#operators" class="anchor"></a>Operators</h2></header><div class="spec module" id="module-O"><a href="#module-O" class="anchor"></a><code><span class="keyword">module</span> <a href="O/index.html">O</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h2 id="rendering"><a href="#rendering" class="anchor"></a>Rendering</h2></header><dl><dt class="spec value" id="val-to_fmt"><a href="#val-to_fmt" class="anchor"></a><code><span class="keyword">val</span> to_fmt : Stdlib.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Render a document to a classic formatter</p></dd></dl><dl><dt class="spec value" id="val-to_fmt_with_tags"><a href="#val-to_fmt_with_tags" class="anchor"></a><code><span class="keyword">val</span> to_fmt_with_tags : Stdlib.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>tag_handler:<span>(Stdlib.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit)</span></span> <span>&#45;&gt;</span> unit</code></dt></dl></section><section><header><h2 id="injection"><a href="#injection" class="anchor"></a>Injection</h2></header><dl><dt class="spec value" id="val-of_fmt"><a href="#val-of_fmt" class="anchor"></a><code><span class="keyword">val</span> of_fmt : <span>(Stdlib.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Inject a classic formatter in a document.</p><p>Disclaimer: this function is to meant to help using <code>Pp</code> in existing code that already use the <code>Format</code> module without having to port everything to <code>Pp</code>. It is not meant as the normal way to create <code>Pp.t</code> values.</p></dd></dl></section><section><header><h2 id="ast"><a href="#ast" class="anchor"></a>Ast</h2></header><div class="spec module" id="module-Ast"><a href="#module-Ast" class="anchor"></a><code><span class="keyword">module</span> <a href="Ast/index.html">Ast</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-of_ast"><a href="#val-of_ast" class="anchor"></a><code><span class="keyword">val</span> of_ast : <span><span class="type-var">'a</span> <a href="Ast/index.html#type-t">Ast.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>of_ast t</code> <code>Ast.t</code> to <code>Pp.t</code></p></dd></dl><dl><dt class="spec value" id="val-to_ast"><a href="#val-to_ast" class="anchor"></a><code><span class="keyword">val</span> to_ast : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span><span class="type-var">'a</span> <a href="Ast/index.html#type-t">Ast.t</a></span>, unit)</span> Stdlib.result</span></code></dt><dd><p><code>to_ast t</code> will try to convert <code>t</code> to <code>Ast.t</code>. When <code>t</code> contains values constructed with <code>of_fmt</code>, this function will fail and return <code>Error ()</code></p></dd></dl></section></div></body></html>